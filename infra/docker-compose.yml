services:
  spring_server:
    build:
      context: ..
      dockerfile: Dockerfile
#    env_file:
#      - ./.env
    volumes:
      # 로그 파일 경로 잡기
      - /var/log:/var/log
    ports:
      - 8080:8080
  promtail:
    image: grafana/promtail
    env_file:
      - ./.env.promtail
    volumes:
      - ./promtail-config.yaml:/etc/promtail/config.yaml
      - /var/log:/var/log
    command:
      -config.file=/etc/promtail/config.yaml
      -config.expand-env=true
